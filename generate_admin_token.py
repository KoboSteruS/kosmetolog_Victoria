"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –∞–¥–º–∏–Ω–∫—É.
–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 1 –≥–æ–¥.
"""
from app.utils import generate_admin_token
from loguru import logger

def main():
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω–∫–∏."""
    logger.info("=" * 80)
    logger.info("üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏")
    logger.info("=" * 80)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 1 –≥–æ–¥)
    token = generate_admin_token(expires_days=365)
    
    logger.info("")
    logger.success("‚úÖ –¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!")
    logger.info("")
    logger.info("üìã –í–∞—à JWT —Ç–æ–∫–µ–Ω:")
    logger.info(f"    {token}")
    logger.info("")
    logger.info("üîó –°—Å—ã–ª–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –∞–¥–º–∏–Ω–∫—É:")
    logger.info(f"    http://localhost:5000/{token}/admin")
    logger.info("")
    logger.info("‚ö†Ô∏è  –í–ê–ñ–ù–û:")
    logger.info("    - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ")
    logger.info("    - –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏")
    logger.info("    - –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 365 –¥–Ω–µ–π")
    logger.info("    - –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS")
    logger.info("")
    logger.info("=" * 80)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –≤ —Ñ–∞–π–ª
    with open('admin_link.txt', 'w', encoding='utf-8') as f:
        f.write(f"–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∫–ª–∏–Ω–∏–∫–∏ –í–∏–∫—Ç–æ—Ä–∏—è\n")
        f.write(f"{'=' * 50}\n\n")
        f.write(f"–°—Å—ã–ª–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞:\n")
        f.write(f"http://localhost:5000/{token}/admin\n\n")
        f.write(f"–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: {365} –¥–Ω–µ–π\n")
        f.write(f"\n–í–ù–ò–ú–ê–ù–ò–ï: –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–æ–π —Å—Å—ã–ª–∫–æ–π!\n")
    
    logger.success("üíæ –°—Å—ã–ª–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª admin_link.txt")


if __name__ == "__main__":
    main()

